group 'io.michaelrocks'

allprojects {
  def properties = new Properties()
  properties.load(new FileInputStream(new File(rootDir, "version.properties")))
  def major = properties['version.major'] as int
  def minor = properties['version.minor'] as int
  def patch = properties['version.patch'] as int
  def suffix = properties['version.suffix']?.toString()?.trim() ?: ""
  def snapshot = properties['version.snapshot'].toBoolean()
  version = "$major.$minor.$patch" + (suffix.isAllWhitespace() ? '' : "-$suffix") + (snapshot ? '-SNAPSHOT' : '')
  group = 'io.michaelrocks'

  ext.dryRun = properties['version.dryRun'].toBoolean()
  ext.publish = properties['version.publish'].toBoolean()
}

buildscript {
  ext.kotlinVersion = '1.1.2-3'
  ext.asmVersion = '5.2'
  ext.gripVersion = '0.5.2-beta'
  ext.logbackVersion = '1.2.2'
  ext.androidToolsVersion = '2.3.1'

  repositories {
    jcenter()
  }

  dependencies {
    classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion"
  }
}

apply plugin: 'java'
apply plugin: 'kotlin'
apply plugin: 'bintray'

sourceCompatibility = JavaVersion.VERSION_1_8
targetCompatibility = JavaVersion.VERSION_1_8

repositories {
  jcenter()
}

dependencies {
  compile gradleApi()
  compile "org.jetbrains.kotlin:kotlin-stdlib-jre8:$kotlinVersion"
  compile "org.ow2.asm:asm:$asmVersion"
  compile "org.ow2.asm:asm-commons:$asmVersion"
  compile "io.michaelrocks:grip:$gripVersion"
  compile "ch.qos.logback:logback-classic:$logbackVersion"

  compileOnly "com.android.tools.build:gradle:$androidToolsVersion"
  compileOnly "com.android.tools.build:gradle-api:$androidToolsVersion"
}

maven {
  artifactName = 'databindingcompat'
}
